!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";function e(t){t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function o(o,s){function c(){return S.update(),u(),S}function h(){v.css(x,S.thumbPosition),b.css(x,-S.contentPosition),w.css(M,S.trackSize),z.css(M,S.trackSize),v.css(M,S.thumbSize)}function u(){P&&(f[0].ontouchstart=function(t){1===t.touches.length&&(e(t),d(t.touches[0]))}),v.bind("mousedown",function(t){e(t),d(t)}),z.bind("mousedown",function(t){d(t,!0)}),t(window).resize(function(){S.update("relative")}),S.options.wheel&&window.addEventListener?o[0].addEventListener(k,m,!1):S.options.wheel&&(o[0].onmousewheel=m)}function a(){return S.contentPosition>0}function r(){return S.contentPosition<=S.contentSize-S.viewportSize-5}function d(e,o){S.hasContentToSroll&&(t("body").addClass("noSelect"),C=o?v.offset()[x]:g?e.pageX:e.pageY,P&&(document.ontouchmove=function(t){(S.options.touchLock||a()&&r())&&t.preventDefault(),t.touches[0][i+"Touch"]=1,l(t.touches[0])},document.ontouchend=p),t(document).bind("mousemove",l),t(document).bind("mouseup",p),v.bind("mouseup",p),z.bind("mouseup",p),l(e))}function m(i){if(S.hasContentToSroll){var n=i||window.event,s=-(n.deltaY||n.detail||-1/3*n.wheelDelta)/40,c=1===n.deltaMode?S.options.wheelSpeed:1;S.contentPosition-=s*c*S.options.wheelSpeed,S.contentPosition=Math.min(S.contentSize-S.viewportSize,Math.max(0,S.contentPosition)),S.thumbPosition=S.contentPosition/S.trackRatio,o.trigger("move"),v.css(x,S.thumbPosition),b.css(x,-S.contentPosition),(S.options.wheelLock||a()&&r())&&(n=t.event.fix(n),n.preventDefault())}e(i)}function l(t){if(S.hasContentToSroll){var e=g?t.pageX:t.pageY,n=t[i+"Touch"]?C-e:e-C,s=Math.min(S.trackSize-S.thumbSize,Math.max(0,S.thumbPosition+n));S.contentPosition=s*S.trackRatio,o.trigger("move"),v.css(x,s),b.css(x,-S.contentPosition)}}function p(){S.thumbPosition=parseInt(v.css(x),10)||0,t("body").removeClass("noSelect"),t(document).unbind("mousemove",l),t(document).unbind("mouseup",p),v.unbind("mouseup",p),z.unbind("mouseup",p),document.ontouchmove=document.ontouchend=null}this.options=t.extend({},n,s),this._defaults=n,this._name=i;var S=this,f=o.find(".viewport"),b=o.find(".overview"),w=o.find(".scrollbar"),z=w.find(".track"),v=w.find(".thumb"),P="ontouchstart"in document.documentElement,k="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",g="x"===this.options.axis,M=g?"width":"height",x=g?"left":"top",C=0;return this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.thumbSize=0,this.thumbPosition=0,this.hasContentToSroll=!1,this.update=function(t){var e=M.charAt(0).toUpperCase()+M.slice(1).toLowerCase();switch(this.viewportSize=f[0]["offset"+e],this.contentSize=b[0]["scroll"+e],this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.thumbSize=Math.min(this.trackSize,Math.max(this.options.thumbSizeMin,this.options.thumbSize||this.trackSize*this.contentRatio)),this.trackRatio=(this.contentSize-this.viewportSize)/(this.trackSize-this.thumbSize),this.hasContentToSroll=this.contentRatio<1,w.toggleClass("disable",!this.hasContentToSroll),t){case"bottom":this.contentPosition=Math.max(this.contentSize-this.viewportSize,0);break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(t,10)||0}return this.thumbPosition=this.contentPosition/this.trackRatio,h(),S},c()}var i="tinyscrollbar",n={axis:"y",wheel:!0,wheelSpeed:40,wheelLock:!0,touchLock:!0,trackSize:!1,thumbSize:!1,thumbSizeMin:20};t.fn[i]=function(e){return this.each(function(){t.data(this,"plugin_"+i)||t.data(this,"plugin_"+i,new o(t(this),e))})}});